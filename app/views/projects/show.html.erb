<div class="container" style="padding-top:25px;">
  <div class="row">
    <div class="col-md-4">
      <div class="project">
        <%= link_to project_path(@project), :class => "thumbnail" do %>
        <%= image_tag("placeholder.png", :alt => "Project", :style => "height: 150px; display: block; padding: 35px 25px;" ) %>
        <% end %>
        <h6><%= link_to @project.title, project_path(@project) %></h6>
        <ul>
          <!-- <li><%= @project.project_entries.count %><span class="icon"></span></li> -->
          <li><%= @project.ideas.count %><span class="icon-bulb"></span></li>
          <li><%= @project.resources.count %><span class="icon-diamond"></span></li>
          <li><%= @project.appliances.count %><span class="icon-user"></span></li>
        </ul>
        <p class="project-about text-left">
          <%= @project.about %>
        </p>
      </div>
      <% if @project.project_entries.count > 0 %>
        <div class="row">
          <div class="col-xs-4">
            <a class="project-actions btn-block" href="#" role="button" data-toggle="modal" data-target="#new-idea">
                <h2 class="text-center"><span class="glyphicon glyphicon-plus mini-icon"></span><span class="icon-bulb"></span></h2>
            </a>
          </div>
          <div class="col-xs-4">
            <a class="project-actions btn-block" href="#" role="button" data-toggle="modal" data-target="#new-resource">
                <h2 class="text-center"><span class="icon-diamond"><span class="glyphicon glyphicon-plus mini-icon"></span></span></h2>
            </a>
          </div>
          <div class="col-xs-4">
            <a class="project-actions btn-block" href="#" role="button" data-toggle="modal" data-target="#new-appliance">
                <h2 class="text-center"><span class="icon-user"></span><span class="glyphicon glyphicon-plus mini-icon"></span></h2>
            </a>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-md-8">
      <% if @project.project_entries.count > 0 %>
      <div class="clearfix">
        <div class="project-entries-filter pull-left">
          <button type="button" class="btn btn-sm btn-default"><span class="icon-star"></span></button>
          <button type="button" class="btn btn-sm btn-default"><span class="icon-lock"></span> Projecto Fechado</button>
        </div>
        <div class="btn-group btn-group-sm pull-right project-entries-filter" role="group" aria-label="...">
          <% if (params[:type].present? and params[:type] == "Idea") %>
            <%= link_to '<span class="icon-bulb"></span>'.html_safe, project_path(), :class => "btn btn-default active" %>
          <% else %>
            <%= link_to '<span class="icon-bulb"></span>'.html_safe, project_path(type: "Idea"), :class => "btn btn-default" %>
          <% end %>
          <% if (params[:type].present? and params[:type] == "Resource") %>
            <%= link_to '<span class="icon-diamond"></span>'.html_safe, project_path(), :class => "btn btn-default active" %>
          <% else %>
            <%= link_to '<span class="icon-diamond"></span>'.html_safe, project_path(type: "Resource"), :class => "btn btn-default" %>
          <% end %>
          <% if (params[:type].present? and params[:type] == "Appliance") %>
            <%= link_to '<span class="icon-user"></span>'.html_safe, project_path(), :class => "btn btn-default active" %>
          <% else %>
            <%= link_to '<span class="icon-user"></span>'.html_safe, project_path(type: "Appliance"), :class => "btn btn-default" %>
          <% end %>
        </div>
      </div>
      <% end %>
      <% if @project.project_entries.count == 0 %>
        <div class="row">
          <div class="col-xs-4">
            <a class="project-no-entries btn-block"  href="#" role="button" data-toggle="modal" data-target="#new-idea">
                <h2 class="text-center"><span class="icon-bulb"></span></h2>
                <p class="text-center">Submeter Ideia!</p>
            </a>
          </div>
          <div class="col-xs-4">
            <a class="project-no-entries btn-block"  href="#" role="button" data-toggle="modal" data-target="#new-resource">
                <h2 class="text-center"><span class="icon-diamond"></span></h2>
                <p class="text-center">Submeter Recurso!</p>
            </a>
          </div>
          <div class="col-xs-4">
            <a class="project-no-entries btn-block" href="#" role="button" data-toggle="modal" data-target="#new-appliance">
                <h2 class="text-center"><span class="icon-user"></span></h2>
                <p class="text-center">Candidatar!</p>
            </a>
          </div>
        </div>
      <% end %>
      <% @entries.each do |entry| %>
        <% if entry.is_a?(Idea) %>
        <div class="media project-entrie">
          <div class="media-left media-middle">
            <a href="<%= project_project_entry_path(@project.id, entry.id) %>">
              <span class="icon-bulb"></span>
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></h4>
            <small>Ideia de <%= link_to entry.user.name, user_path(entry.user_id) %></small>
          </div>
        </div>
        <!-- <%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %>
        <%= entry.description %>
        <%= entry.user_id %>
        <%= entry.type %>
        <%= entry.inspect %> -->

        <% elsif entry.is_a?(Resource) %>
        <div class="media project-entrie">
          <div class="media-left media-middle">
            <a href="<%= project_project_entry_path(@project.id, entry.id) %>">
              <span class="icon-diamond"></span>
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></h4>
            <small>Recurso de <%= link_to entry.user.name, user_path(entry.user_id) %></small>
          </div>
        </div>
        <% elsif entry.is_a?(Appliance) %>
        <div class="media project-entrie">
          <div class="media-left media-middle">
            <a href="<%= project_project_entry_path(@project.id, entry.id) %>">
              <span class="icon-user"></span>
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><%= link_to entry.user.name, user_path(entry.user_id) %> candidatou-se ao projecto!</h4>
            <small>Não percas a tua oportunidade.</small>
          </div>
        </div>
        <% end %>
      <% end %>
    </div>
  </div>



  <!-- <div class="row">
    <div class="project">
      <h1 class="text-center"><%= @project.title %></h1>
      <ul>
        <li><%= @project.project_entries.count %><span class="glyphicon glyphicon-list-alt"></span></li>
        <li><%= @project.ideas.count %><span class="glyphicon glyphicon-lamp"></span></li>
        <li><%= @project.resources.count %><span class="glyphicon glyphicon-briefcase"></span></li>
      </ul>
      <p>
        <%= @project.about %>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6" style="padding-left:0;">
      <h4>Ideias</h4>
      <% @project.ideas.each do |entry| %>

        <div class="idea">
          <h4><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></h4>
          <small><%= entry.type %> de <%= link_to entry.user.name, user_path(entry.user_id) %></small>
          <hr>

          <%= entry.description %>
          <small class="hidden"><%= entry.inspect %></small>
        </div>
      <% end %>
    </div>
    <div class="col-sm-6" style="padding-right:0;">
      <h4>Recursos</h4>
      <% @project.resources.each do |entry| %>

        <div class="idea">
          <h4><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></h4>
          <small><%= entry.type %> de <%= link_to entry.user.name, user_path(entry.user_id) %></small>
          <hr>

          <%= entry.description %>
          <small class="hidden"><%= entry.inspect %></small>
        </div>
      <% end %>
    </div>
  </div>
</div> -->


<!-- <table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>User</th>
      <th>Type</th>
      <th>Inspect</th>
    </tr>
  </thead>
  <% @project.project_entries.each do |entry| %>
  <tr>
    <td><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></td>
    <td><%= entry.description %></td>
    <td><%= entry.user_id %></td>
    <td><%= entry.type %></td>
    <td><small><%= entry.inspect %></small></td>
  </tr>
  <% end %>
</table>


<h3>Ideas</h3>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>User</th>
      <th>Type</th>
      <th>Inspect</th>
    </tr>
  </thead>
  <% @project.ideas.each do |entry| %>
  <tr>
    <td><%= link_to entry.name, project_project_entry_path(@project.id, entry.id) %></td>
    <td><%= entry.description %></td>
    <td><%= link_to entry.user.name, user_path(entry.user_id) %></td>
    <td><%= entry.type %></td>
    <td><small><%= entry.inspect %></small></td>
  </tr>
  <% end %>
</table> -->




<% if user_signed_in? %>
<!-- Modal New Appliance -->
<div class="modal fade" id="new-appliance" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body text-center">
        Estamos prestes a submeter a tua candidatura a este projecto.<br>Tens a certeza?
      </div>
      <div class="modal-footer" style="background-color: #ecf0f1;">
        <%= form_for [@project, Appliance.new] do |f| %>
          <%= f.hidden_field :user_id, :value => current_user.id %>
          <%= f.submit 'Sim, quero candidatar-me!', :class => 'btn btn-primary btn-block'  %>
        <% end %>
      </div>
    </div>
  </div>
</div>
<!-- Modal New Resource -->
<div class="modal fade" id="new-resource" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <!-- <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Novo Recurso</h4>
      </div> -->
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="margin-top:-10px;">&times;</span></button>

        <%= form_for [@project, Resource.new] do |f| %>
          <%= f.hidden_field :user_id, :value => current_user.id %>
          <div class="form-group">
            <label for="recipient-name" class="control-label" style="color:#34495e;">Titulo</label>
            <%= f.text_field :name, class: "form-control", type: "text" %>
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label" style="color:#34495e;">Breve Descrição</label>
            <%= f.text_field :description, class: "form-control" %>
          </div>
          <%= f.submit 'Submeter Recurso', :class => 'btn btn-primary btn-block'  %>
        <% end %>
      </div>
      <!-- <div class="modal-footer" style="background-color: #ecf0f1;">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
      </div> -->
    </div>
  </div>
</div>
<!-- Modal New Idea -->
<div class="modal fade" id="new-idea" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <!-- <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Nova Ideia</h4>
      </div> -->
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" style="margin-top:-10px;">&times;</span></button>

        <%= form_for [@project, Idea.new] do |f| %>
          <%= f.hidden_field :user_id, :value => current_user.id %>
          <div class="form-group">
            <label for="recipient-name" class="control-label" style="color:#34495e;">Titulo</label>
            <%= f.text_field :name, class: "form-control", type: "text" %>
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label" style="color:#34495e;">Breve Descrição</label>
            <%= f.text_field :description, class: "form-control" %>
          </div>
          <%= f.submit 'Submeter Ideia', :class => 'btn btn-primary btn-block'  %>
        <% end %>
      </div>
      <!-- <div class="modal-footer" style="background-color: #ecf0f1;">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
      </div> -->
    </div>
  </div>
</div>
<% end %>
